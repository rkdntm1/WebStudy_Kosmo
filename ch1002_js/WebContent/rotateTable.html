<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script>
	/*
	a(0,0)	b(0,1)	c(0,2)	d(0,3)	e(0,4)
	f(1,0)	g(1,1)	h(1,2)	i(1,3)	j(1,4)
	k(2,0)	l(2,1)	m(2,2)	n(2,3)	o(2,4)
	p(3,0)	q(3,1)	r(3,2)	s(3,3)	t(3,4)
	u(4,0)	v(4,1)	w(4,2)	x(4,3)	y(4,4)
	*/
	var ROOT = 5;
	var chars = new Array(); // 2차원 배열만들기
	function makeTable() {
		for (i = 0; i < ROOT; i++){
			row = new Array(); // js는 chars[][]형식으로 직접 만드는게 안됨 -> 배열에 배열을 넣어서 2차원으로 만들기
			for (j = 0; j < ROOT; j++){
				// 97 : 'a'
				row[j] = String.fromCharCode(97 + i * ROOT + j); 
			}
			chars[i] = row;
		}				
	}
	makeTable();
	
	function displayTable() {
		document.write("<table>");
		for (i = 0; i < ROOT; i++){
			document.write("<tr>");
			for (j = 0; j < ROOT; j++){
				document.write("<td>");
				document.write(chars[i][j]); 
				document.write("</td>");
			}
			document.write("</tr>");
		}				
		document.write("</table>");
	}
	
	/*
	a
	f b
	k g c
	p l h d
	u q m i e
	v r n j
	w s o
	x t
	y
	*/	
	function rotate() {
		
		document.write("<table>");
		tp = ROOT - 1; //변곡점
		tail = 0;
		delta = 1;
		for (i = 0; i < ROOT * 2 - 1; i++){
			document.write("<tr>");
			document.write("<td>");
			// let(변수 재할당가능) vs const(변수 재할당 불가능)
			let row, col; // let -> Hoisting: 변수위치를 맨위로 올려준다.
			
			if (i < ROOT){ // 변환점이전 (1,0) (2,0) ... 
				row = i;
				col = 0;
			} else {	//변환점이후 (4, 1) (4, 2) ...
				row = tp;
				col = i - (tp);
			}
			document.write(chars[row][col]); //출력 중복성을 없애고 한번에 출력
			document.write("</td>");
			
			//꼬리 부분
			for (j = 0; j < tail; j++){
				row--;
				col++;
				document.write("<td>");
				document.write(chars[row][col]);
				document.write("</td>");
			}			
			document.write("</tr>");
			//터닝포인트에서 방향값을 바꿔줌
			if (i == tp) {
				delta = -1;
			}
			tail += delta;
		}
		document.write("</table>")		
	}
		
</script>
</head>
<body>
	<script>
	displayTable();	
	</script>
	<input type="button" value="비틀기" onclick="rotate()">
</body>
</html>
