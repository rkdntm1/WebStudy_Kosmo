<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">
	var ws;
	var wsUri = "wss://echo.websocket.org/";	
	//웹소켓 연결
	function connectSocket() {		
		// 윈도우에 웹소켓이 지원될 경우		
		if ("WebSocket" in window) {
			ws = new WebSocket(wsUri);
			ws.onopen = function() {
				alert("웹소켓 오픈 성공");
			};
			
			//데이터가 올 떄 불려지는 Callback 함수
			ws.onmessage = function(e) {
				var msg = e.data;
				document.getElementById("result").innerHTML = msg;
			};
			
			ws.onclose() = function() {
				alert("웹소켓 연결 해제")
			}
		} else {
			alert("웹소켓이 지원히자않음");
		}
	}
	
	//데이터 송신
	function send() {
		ws.send(document.getElementById("data").value);
	}
	
	//웹소켓 연결 끊기 
	function quit() {
		ws.close();
	}
</script>
</head>
<body>
	<button onclick="connectSocket();">웹소켓 연결</button>
	<button onclick="quit();">웹소켓 연결 종료</button><br>
	<input type="text" id="data">
	<button onclick="send();">데이터송신</button><br>
	에코서버로부터 받은 데이터: <output id="result"></output>
</body>
</html>